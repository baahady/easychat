new Vue({
	el:'#timeline',
	data:{
		post:'',
		posts:[],
		limit:10,
		total:0
	},
	methods:{ 
		postStatus(e){
			e.preventDefault();
			$.ajax({
				url:'/posts',
				type:'post',
				dataType:'json',
				data:{
					'body':this.post
				},
				success:function(data){
					this.post=""
					this.posts.unshift(data);
				}.bind(this),
				error:function(){
					//
				}
			});
		},
		getPosts(){
			$.ajax({
				url:'/posts',
				dataType:'json',
				type:'get',
				data:{
					limit: this.limit
				},
				success:function(data){
					this.posts=data.posts
					this.total=data.total
				}.bind(this),
			});
		},
		getMorePosts(e){
			e.preventDefault();
			this.limit=this.limit+this.limit;
			this.getPosts();
		}
	},
	mounted(){
		this.getPosts();

		setInterval(function(){
			this.getPosts();
		}.bind(this),5000);
	}
});